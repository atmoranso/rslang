# RS Lang

### Описание структуры проекта и рекомендации по стилю кода
**Именование файлов:** во всем проекте используется "верблюжья нотация".
**Название файлов классов:** с большой буквы. ClassName.ts. Все остальные файлы (типы, константы, функции, объекты) - с маленькой буквы.
**Названия классов CSS:** по БЭМ-у. Для элемента используем двойное подчеркивание `__`, для модификатора одинарное подчеркивание `_`. В многословных именах классов разделение слов через тире `-`. **Пример:** `.main-list__item-container_red`
**переменные SASS:** - при многословном наименовании пишем через тире: `$color-bg-light`
### Базовая структура:
```
assets                   - папка для статических файлов (шрифты, картинки, иконки и т.д.)
sass                     - папка для scss стилей
scripts                  - общая папка для всех скриптов
index.html               - точка входа в приложение.
index.ts                 - файл, который инклудится в index.html
```
Остальные файлы в корне папки **src** - служебные файлы настройки

### assets
```
assets/fonts                    - папка для шрифтов
assets/images                   - папка для картинок в формате **.jpg, .png**
assets/svg                      - папка векторных файлов **.svg**
```
### sass
Входной файл, в который импортируются все остальные файлы - **sass/style.scss**
```
sass/abstracts/                      - общая папка для абстракций
sass/abstracts/_mixins.scss          - миксины
sass/abstracts/_placeHolders.scss    - шаблонные селекторы (начинающиеся со знака % и используемые с @extend)
sass/abstracts/_variables.scss       - файл для переменных
sass/base/                           - папка для каких-то базовых стилей, которые могут применяться ко всему проекту
sass/components/                     - папка для компонентов, которые могут быть переиспользованы в разных местах на разных страницах (не обязательно), меню, кнопки и т.д..
sass/layouts/                        - папка для стилей отдельных секций приложения, которые будут использоваться на всех страницах (header, footer, main)
sass/pages/                          - папка для стилей отдельных модулей (страниц) приложения. Home, Sprint, Textbook etc.
```
При добавлении файла стилей, не забудьте включить его в **sass/style.scss**
Все названия файлов, кроме файла style.scss начинаются с нижнего подчеркивания `_` (причины гуглим в мануале по sass)

#### Именование переменных в файле _variables.scss
1. Цвета начинаются с приставки `$color-`
2. Размеры начинаются с приставки `$size-`


### Архитектура и структура ts кода

Приложение делим на модули (компоненты) вида: Home (главная страница), Sprint, Textbook, Statistic и т.п.
Каждый компонент в свою очередь использует MVC архитектуру.

**Общая структура файлов с кодом:**
```
scripts/App.ts                              - промежуточная точка входа в приложение. Из него через Router файлы "scripts/modules/moduleName/ModuleName.ts"
scripts/common/                             - общая папка для классов которые могут использоваться где угодно. Пока нет разделения на категории.
                                              Тут будут типы, интерфейсы, общие служебные классы, какие-то view, которые используются на всех страницах.
                                              Если/когда файлов станет больше - разделим на подпапки и категоризируем.

scripts/common/ElementTemplate.ts           - Базовый класс для создания элементов. При создании view наследуемся от этого класса или от его потомков.
scripts/common/ObserverBasic.ts             - Базовый класс реализующий паттерн Observer. При создании нового слушателя наследуемся от этого класса.


scripts/modules/                            - общая папка, в которой надохятся отдельные модули. Каждый модуль в своей папке.
scripts/modules/moduleName/ModuleName.ts    - Файл "точка входа" в модуль. Там создаются объекты view и model и пердаются в создаваемый объект controller.
                                              Запускается метод "controller.init()"

scripts/modules/moduleName/controller/       - папка для контроллеров модуля
scripts/modules/moduleName/model/            - папка для модели (логики) модуля
scripts/modules/moduleName/view/             - папка для view модуля

*в папках controller, model, view - корневыми файлами являются controller.ts, model.ts и view.ts соответственно.
 Если нужны доп. файлы - называем их соответственно логике элемента (cards.ts, card.ts, button.ts, и т.д.)
```
### Git
1. Основные правила работы с Git в комманде указаны [тут](https://github.com/rolling-scopes-school/tasks/tree/master/stage2/modules/final-task#%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0-%D1%81-%D1%80%D0%B5%D0%BF%D0%BE%D0%B7%D0%B8%D1%82%D0%BE%D1%80%D0%B8%D0%B5%D0%BC)
2. Ветки называем по шаблону `(feature|fix|docs)/some-name`. **Примеры:**`feature/home-view`, `fix/some-bug-name`, `docs/readme`. С маленькой буквы, разные слова через тире.

### Git Project
1. Создание новой задачи в `Backlog`. Задача создается в виде `Draft`. Можно сразу конвертировать в `issue`. Или не котвертировать, если это какой-то временный вариант или требуются доп. действия.
2. После конвертировании в `issue`, задаче ставится нужная `label`, и указывается `milestone` (milestone - это дедлайн. Создано их 3 шт, разделил по спринтам. Чтобы посмотреть или редактировать все milestones, нужно зайти в раздел `issues` и справа вверху нажать `Milestones`, рядом есть кнопка `Labels` - редактировать соответственно метки).
3. Когда берете таск себе, в настройках задачи добавить себя в разделе `Assignees` и передвинуть задачу в колонку `InProgress`.
4. В колонку `InProgress` можно ставить задачи которые уже конвертированы в `issue`.
5. После работы над таском создается пул-реквест. Справа в настройках пулл-реквеста в разделе Development добавляем соответствующий таск(таск привязывается уже к созданному ПР). Теперь после того как пулл-реквест будет замержен `issue` автоматом закроется и перенесется в колонку done.
6. Если выясняется что какая-то выполненная задача должна быть доделана - переставляем ее в колонку Need to fix. Потом тот кто берет ее на выполнение - открывает это закрытое issue и задача автоматом переходит в `InProgress`.

**Сделана автоматизация:**
При закрытии issue - автоматом переносится в done  
Eсли закрытое issue открывается снова - оно автоматом переносится в колонку InProgress

## Стиль кода
### View
1. Все view наследуются от `ElementTemplate` или его потомков.
2. Если `view` в модуле статичное (т.е. всегда постоянное и никогда никакие внутренние элементы не меняются) - для этого модуля **не** создаем классы `model` и `controller`. Все `view` полностью создается в конструкторе класса.
3. Каждое view, которое имеет обновляющиеся элементы - должно содержать метод `update(state: {a: string; b: number})`. В этот метод из модели будут передаваться данные для обновления. Если при создании `view` уже где-то зафиксирован тип такого принимаемого параметра - его и указываем, если нет - создаем самостоятельно в виде объекта, поля которого содержат нужные для обновления данные (по фату как раз придумываем тип такого объекта, в зависимости от того какие данные нужны). С этими полями и работаем в методе. Метод должен обновлять view или вызывать методы `update(state)` во внутренних (необходимых) `view`.
4. Если `view1` содержит внутренние `view2, view3, view4`, на которые в свою очередь будут ставиться слушателя или они будут меняться динамически, то для `view1` создаем отдельный класс. В поля этого класса присваиваем `view2, view3, view4`.
5. Если `view` статический и не будет содержать ссылок на другие элементы - класс не создаем, просто создаем объект класса `ElementTemplate`
